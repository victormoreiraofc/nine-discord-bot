{"version":3,"file":"discord-system-message.js","sourceRoot":"","sources":["../../../src/components/discord-system-message/discord-system-message.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Element, h, Host, Prop, Watch } from '@stencil/core';\nimport clsx from 'clsx';\nimport { DiscordTimestamp, handleTimestamp } from '../../util';\nimport Boost from '../svgs/boost';\nimport DMCall from '../svgs/dm-call';\nimport DMEdit from '../svgs/dm-edit';\nimport DMMissedCall from '../svgs/dm-missed-call';\nimport Pin from '../svgs/pin';\nimport SystemAlert from '../svgs/system-alert';\nimport SystemError from '../svgs/system-error';\nimport Thread from '../svgs/thread';\nimport UserJoin from '../svgs/user-join';\nimport UserLeave from '../svgs/user-leave';\n\n@Component({\n\ttag: 'discord-system-message',\n\tstyleUrl: 'discord-system-message.css'\n})\nexport class DiscordSystemMessage implements ComponentInterface {\n\t/**\n\t * The DiscordSystemMessage element.\n\t */\n\t@Element()\n\tpublic el: HTMLElement;\n\n\t/**\n\t * The timestamp to use for the message date.\n\t */\n\t@Prop({ mutable: true, reflect: true })\n\tpublic timestamp: DiscordTimestamp = new Date();\n\n\t/**\n\t * The type of system message this is, this will change the icon shown.\n\t * Valid values: `join`, `leave`, `call`, `missed-call`, `boost`, `edit`, `thread`, `pin`, `alert`, and `error`.\n\t */\n\t@Prop()\n\tpublic type: 'join' | 'leave' | 'call' | 'missed-call' | 'boost' | 'edit' | 'thread' | 'pin' | 'alert' | 'error' = 'join';\n\n\t/**\n\t * Whether this message is to show channel name changes, used to match Discord's style.\n\t */\n\t@Prop()\n\tpublic channelName = false;\n\n\t@Watch('type')\n\tpublic handleType(value: string) {\n\t\tif (typeof value !== 'string') {\n\t\t\tthrow new TypeError('DiscordSystemMessage `type` prop must be a string.');\n\t\t} else if (!['join', 'leave', 'call', 'missed-call', 'boost', 'edit', 'thread', 'pin', 'alert', 'error'].includes(value)) {\n\t\t\tthrow new RangeError(\n\t\t\t\t\"DiscordSystemMessage `type` prop must be one of: 'join', 'leave', 'call', 'missed-call', 'boost', 'edit', 'pin', 'thread' 'alert', 'error'\"\n\t\t\t);\n\t\t}\n\t}\n\n\t@Watch('timestamp')\n\tpublic updateTimestamp(value: DiscordTimestamp): string | null {\n\t\treturn handleTimestamp(value);\n\t}\n\n\tpublic componentWillRender() {\n\t\tthis.timestamp = handleTimestamp(this.timestamp);\n\t}\n\n\tpublic render() {\n\t\tconst parent: HTMLDiscordMessagesElement = this.el.parentElement as HTMLDiscordMessagesElement;\n\n\t\tif (parent.tagName.toLowerCase() !== 'discord-messages') {\n\t\t\tthrow new Error('All <discord-system-message> components must be direct children of <discord-messages>.');\n\t\t}\n\n\t\tlet icon = '';\n\n\t\tswitch (this.type) {\n\t\t\tcase 'join':\n\t\t\t\ticon = <UserJoin />;\n\t\t\t\tbreak;\n\t\t\tcase 'leave':\n\t\t\t\ticon = <UserLeave />;\n\t\t\t\tbreak;\n\t\t\tcase 'call':\n\t\t\t\ticon = <DMCall />;\n\t\t\t\tbreak;\n\t\t\tcase 'missed-call':\n\t\t\t\ticon = <DMMissedCall />;\n\t\t\t\tbreak;\n\t\t\tcase 'edit':\n\t\t\t\ticon = <DMEdit />;\n\t\t\t\tbreak;\n\t\t\tcase 'boost':\n\t\t\t\ticon = <Boost />;\n\t\t\t\tbreak;\n\t\t\tcase 'thread':\n\t\t\t\ticon = <Thread />;\n\t\t\t\tbreak;\n\t\t\tcase 'alert':\n\t\t\t\ticon = <SystemAlert />;\n\t\t\t\tbreak;\n\t\t\tcase 'error':\n\t\t\t\ticon = <SystemError />;\n\t\t\t\tbreak;\n\t\t\tcase 'pin':\n\t\t\t\ticon = <Pin />;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst hasThread: boolean =\n\t\t\t// @ts-expect-error ts doesn't understand this\n\t\t\tArray.from(this.el.children).some((child: HTMLDiscordThreadElement): boolean => {\n\t\t\t\treturn child.tagName.toLowerCase() === 'discord-thread';\n\t\t\t});\n\n\t\treturn (\n\t\t\t<Host\n\t\t\t\tclass={clsx('discord-system-message', `discord-${this.type}-system-message`, {\n\t\t\t\t\t'discord-system-message-has-thread': hasThread,\n\t\t\t\t\t'discord-channel-name-change': this.channelName\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div class=\"discord-message-icon\">{icon}</div>\n\t\t\t\t<div class=\"discord-message-content\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t\t<span class=\"discord-message-timestamp\">{this.timestamp}</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<slot name=\"reactions\"></slot>\n\t\t\t\t\t<slot name=\"thread\"></slot>\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"]}