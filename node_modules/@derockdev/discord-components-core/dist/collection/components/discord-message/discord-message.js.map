{"version":3,"file":"discord-message.js","sourceRoot":"","sources":["../../../src/components/discord-message/discord-message.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentInterface, Element, h, Host, Prop, Watch } from '@stencil/core';\nimport clsx from 'clsx';\nimport Fragment from '../../Fragment';\nimport { avatars, Profile, profiles } from '../../options';\nimport { DiscordTimestamp, handleTimestamp } from '../../util';\nimport { AuthorInfo } from '../author-info/author-info';\nimport Ephemeral from '../svgs/ephemeral';\n\n@Component({\n\ttag: 'discord-message',\n\tstyleUrl: 'discord-message.css'\n})\nexport class DiscordMessage implements ComponentInterface {\n\t/**\n\t * The DiscordMessage element.\n\t */\n\t@Element()\n\tpublic el: HTMLElement;\n\n\t/**\n\t * The id of the profile data to use.\n\t */\n\t@Prop()\n\tpublic profile: string;\n\n\t/**\n\t * The message author's username.\n\t * @default 'User'\n\t */\n\t@Prop()\n\tpublic author = 'User';\n\n\t/**\n\t * The message author's avatar. Can be an avatar shortcut, relative path, or external link.\n\t */\n\t@Prop()\n\tpublic avatar: string;\n\n\t/**\n\t * Whether the message author is a bot or not.\n\t * Only works if `server` is `false` or `undefined`.\n\t */\n\t@Prop()\n\tpublic bot = false;\n\n\t/**\n\t * Whether the message author is a server crosspost webhook or not.\n\t * Only works if `bot` is `false` or `undefined`.\n\t */\n\t@Prop()\n\tpublic server = false;\n\n\t/**\n\t * Whether the bot is verified or not.\n\t * Only works if `bot` is `true`\n\t */\n\t@Prop()\n\tpublic verified = false;\n\n\t/**\n\t * Whether the author is the original poster.\n\t */\n\t@Prop()\n\tpublic op = false;\n\n\t/**\n\t * Whether the message has been edited or not.\n\t */\n\t@Prop()\n\tpublic edited = false;\n\n\t/**\n\t * The message author's primary role color. Can be any [CSS color value](https://www.w3schools.com/cssref/css_colors_legal.asp).\n\t */\n\t@Prop()\n\tpublic roleColor: string;\n\n\t/**\n\t * The message author's role icon URL.\n\t */\n\t@Prop()\n\tpublic roleIcon: string;\n\n\t/**\n\t * The name of the role to use as alternative image text.\n\t */\n\t@Prop()\n\tpublic roleName: string;\n\n\t/**\n\t * Whether to highlight this message.\n\t */\n\t@Prop()\n\tpublic highlight = false;\n\n\t/**\n\t * Whether to make this message ephemeral.\n\t */\n\t@Prop()\n\tpublic ephemeral = false;\n\n\t/**\n\t * The timestamp to use for the message date.\n\t */\n\t@Prop({ mutable: true, reflect: true })\n\tpublic timestamp: DiscordTimestamp = new Date();\n\n\t/**\n\t * Whether to use 24-hour format for the timestamp.\n\t */\n\t@Prop()\n\tpublic twentyFour = false;\n\n\t@Watch('timestamp')\n\tpublic updateTimestamp(value: DiscordTimestamp): string | null {\n\t\treturn handleTimestamp(value, this.twentyFour);\n\t}\n\n\tpublic componentWillRender() {\n\t\tthis.timestamp = handleTimestamp(this.timestamp, this.twentyFour);\n\t}\n\n\tpublic render() {\n\t\tconst parent: HTMLDiscordMessagesElement = this.el.parentElement as HTMLDiscordMessagesElement;\n\n\t\tif (parent.tagName.toLowerCase() !== 'discord-messages') {\n\t\t\tthrow new Error('All <discord-message> components must be direct children of <discord-messages>.');\n\t\t}\n\n\t\tconst resolveAvatar = (avatar: string): string => avatars[avatar] ?? avatar ?? avatars.default;\n\n\t\tconst defaultData: Profile = {\n\t\t\tauthor: this.author,\n\t\t\tbot: this.bot,\n\t\t\tverified: this.verified,\n\t\t\tserver: this.server,\n\t\t\top: this.op,\n\t\t\troleColor: this.roleColor,\n\t\t\troleIcon: this.roleIcon,\n\t\t\troleName: this.roleName\n\t\t};\n\t\tconst profileData: Profile = Reflect.get(profiles, this.profile) ?? {};\n\t\tconst profile: Profile = { ...defaultData, ...profileData, ...{ avatar: resolveAvatar(profileData.avatar ?? this.avatar) } };\n\n\t\tconst highlightMention: boolean =\n\t\t\t// @ts-expect-error ts doesn't understand this\n\t\t\tArray.from(this.el.children).some((child: HTMLDiscordMentionElement): boolean => {\n\t\t\t\treturn child.tagName.toLowerCase() === 'discord-mention' && child.highlight && ['user', 'role'].includes(child.type);\n\t\t\t}) || this.highlight;\n\n\t\tconst hasThread: boolean =\n\t\t\t// @ts-expect-error ts doesn't understand this\n\t\t\tArray.from(this.el.children).some((child: HTMLDiscordThreadElement): boolean => {\n\t\t\t\treturn child.tagName.toLowerCase() === 'discord-thread';\n\t\t\t});\n\n\t\treturn (\n\t\t\t<Host\n\t\t\t\tclass={clsx('discord-message', {\n\t\t\t\t\t'discord-highlight-mention': highlightMention,\n\t\t\t\t\t'discord-message-has-thread': hasThread,\n\t\t\t\t\t'discord-highlight-ephemeral': this.ephemeral\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<slot name=\"reply\"></slot>\n\t\t\t\t<div class=\"discord-message-inner\">\n\t\t\t\t\t{parent.compactMode && <span class=\"discord-message-timestamp\">{this.timestamp}</span>}\n\t\t\t\t\t<div class=\"discord-author-avatar\">\n\t\t\t\t\t\t<img src={profile.avatar} alt={profile.author} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"discord-message-content\">\n\t\t\t\t\t\t{!parent.compactMode && (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<AuthorInfo\n\t\t\t\t\t\t\t\t\tauthor={profile.author ?? ''}\n\t\t\t\t\t\t\t\t\tbot={profile.bot ?? false}\n\t\t\t\t\t\t\t\t\tserver={profile.server ?? false}\n\t\t\t\t\t\t\t\t\tverified={profile.verified ?? false}\n\t\t\t\t\t\t\t\t\top={profile.op ?? false}\n\t\t\t\t\t\t\t\t\troleColor={profile.roleColor ?? ''}\n\t\t\t\t\t\t\t\t\troleIcon={profile.roleIcon ?? ''}\n\t\t\t\t\t\t\t\t\troleName={profile.roleName ?? ''}\n\t\t\t\t\t\t\t\t\tcompact={parent.compactMode}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<span class=\"discord-message-timestamp\">{this.timestamp}</span>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div class=\"discord-message-body\">\n\t\t\t\t\t\t\t{parent.compactMode && (\n\t\t\t\t\t\t\t\t<AuthorInfo\n\t\t\t\t\t\t\t\t\tauthor={profile.author ?? ''}\n\t\t\t\t\t\t\t\t\tbot={profile.bot ?? false}\n\t\t\t\t\t\t\t\t\tserver={profile.server ?? false}\n\t\t\t\t\t\t\t\t\tverified={profile.verified ?? false}\n\t\t\t\t\t\t\t\t\top={profile.op ?? false}\n\t\t\t\t\t\t\t\t\troleColor={profile.roleColor ?? ''}\n\t\t\t\t\t\t\t\t\troleIcon={profile.roleIcon ?? ''}\n\t\t\t\t\t\t\t\t\troleName={profile.roleName ?? ''}\n\t\t\t\t\t\t\t\t\tcompact={parent.compactMode}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<span class=\"discord-message-markup\">\n\t\t\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{this.edited ? <span class=\"discord-message-edited\">(edited)</span> : ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"discord-message-compact-indent\">\n\t\t\t\t\t\t\t<slot name=\"embeds\"></slot>\n\t\t\t\t\t\t\t<slot name=\"attachments\"></slot>\n\t\t\t\t\t\t\t<slot name=\"components\"></slot>\n\t\t\t\t\t\t\t<slot name=\"reactions\"></slot>\n\t\t\t\t\t\t\t<slot name=\"thread\"></slot>\n\t\t\t\t\t\t\t{this.ephemeral && (\n\t\t\t\t\t\t\t\t<div class=\"discord-message-ephemeral\">\n\t\t\t\t\t\t\t\t\t<Ephemeral class=\"discord-message-ephemeral-icon\" />\n\t\t\t\t\t\t\t\t\tOnly you can see this • <span class=\"discord-message-ephemeral-link\">Dismiss message</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Host>\n\t\t);\n\t}\n}\n"]}